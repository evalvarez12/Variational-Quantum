\documentclass[border=0pt]{standalone}

\input{../style/general.tex}
\input{../style/newsymbols.tex}
\input{../style/graphs.tex}

\usepgfplotslibrary{patchplots}
\pgfplotsset{compat=1.13}

\begin{document}
	\begin{tikzpicture}
		\begin{axis}[
			xmin=-1, xmax=3.5, ymin=-3, ymax=1,
			xlabel={Undeflected tip distance $r_0$ (\unit{nm})}, xtick={-.5, 0, 0.5, 1, 1.5, 2, 2.5,3}, ylabel={Tip deflection $\Delta r$ (\unit{nm})}, %legend pos=outer north east
			colormap name={moreland}, %colormap/blackwhite,
			colorbar,
			colorbar style={
		    	%title=Color key,
		    	ylabel={Derivation},
		    	ytick=\empty,
		    	%y label pos=east,
			},
			view={0}{90}, %axis lines=middle,
			unit vector ratio=1 1,
			width=14cm,
		]
			\addplot3[scatter, only marks, mark=*, mark size=0.15, point meta=z, %shader=faceted interp,
			point meta min={1.8}, point meta max={3},
			] table[col sep=comma, x index=0, y index=1, z expr={log10(\thisrowno{2})}] {data/ringStep_it-500_step-100_met-0.csv};
			%\addplot[only marks, mark=*, mark size=0.1, black] table[col sep=comma] {hw06-1cd.csv};
			
			%Axes
			\addplot3[black, thin] coordinates { (-1, 0, 2) (3.5, 0, 2) };
			\addplot3[black, thin] coordinates { (0, 1, 2) (0, -3, 2) };
			
			%Paths
			\addplot3[black, -, thick] coordinates { (1.47, -0.47, 2) (1.47, -1.225, 2) };
			\addplot3[blue, ->, thick] coordinates { (3.5, 0.04, 2) (1.8, -.1, 2) (1.6, -.2, 2) (1.4, -0.4, 2) (1.4, -1.05, 2) (0, 0.3, 2) };
			
			%\addplot3[black, -, thick] coordinates {(2.82, -2.5, 2) (2.82, -0.07, 2) };
			%\addplot3[red, ->, thick] coordinates {(0, 0.15, 2) (2.6, -2.4, 2) (2.87, -2.57, 2) (2.87, -0.12, 2) (3.5, -0.1, 2) };
		\end{axis}
	\end{tikzpicture}
			
\end{document}